---
permalink: online-help-96-97/concept_metrocluster_switchover_switchback_workflow.html 
sidebar: sidebar 
keywords: metrocluster, switchover, switchback, workflow, online, help, offline, maintenance 
summary: 'System Manager 9.6부터 소스 클러스터의 모든 노드에 연결할 수 없고 전원을 끈 재해가 발생한 후 MetroCluster 스위치오버 및 스위치백 작업을 사용할 수 있습니다. 또한 재해 복구 테스트 또는 유지 관리를 위해 오프라인으로 전환되는 사이트와 같은 경우 협상된(계획된) 전환 워크플로우를 사용할 수도 있습니다.' 
---
= MetroCluster 전환 및 스위치백에 대해 설명합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP System Manager 9.6부터 소스 클러스터의 모든 노드에 연결할 수 없고 전원을 끈 재해가 발생한 후 MetroCluster 스위치오버 및 스위치백 작업을 사용할 수 있습니다. 또한 재해 복구 테스트 또는 유지 관리를 위해 오프라인으로 전환되는 사이트와 같은 경우 협상된(계획된) 전환 워크플로우를 사용할 수도 있습니다.



== MetroCluster 전환 및 스위치백에 대해 설명합니다

System Manager 9.6부터는 MetroCluster 스위치오버 및 스위치백 작업을 사용하여 한 클러스터 사이트에서 다른 클러스터 사이트의 작업을 테이크오버할 수 있습니다. 이 기능을 사용하면 재해에 대한 유지 관리 또는 복구를 보다 용이하게 수행할 수 있습니다.

스위치오버 작업을 사용하면 한 클러스터(사이트 A)가 일반적으로 다른 클러스터(사이트 B)에서 수행하는 작업을 대신 수행할 수 있습니다. 스위치오버 이후 유지 관리 및 수리를 위해 사이트 B로 전환된 클러스터를 가져올 수 있습니다. 유지 관리가 완료되면 사이트 B가 시작되고 복구 작업이 완료된 다음, 복구된 클러스터(사이트 B)가 일반적으로 수행하는 작업을 다시 시작할 수 있도록 스위치백 작업을 시작할 수 있습니다.

System Manager는 원격 클러스터 사이트의 상태에 따라 다음과 같은 두 가지 유형의 전환 작업을 지원합니다.

* 협상된(계획된) 전환: 클러스터에서 계획된 유지 관리를 수행하거나 재해 복구 절차를 테스트해야 할 때 이 작업을 시작합니다.
* 계획되지 않은 전환: 클러스터(사이트 B)에서 재해가 발생하여 다른 사이트 또는 클러스터(사이트 A)에서 복구 및 유지 관리를 수행하는 동안 재해가 영향을 받는 클러스터 작업을 대신 처리하려는 경우 이 작업을 시작합니다.


System Manager에서 두 전환 작업에 동일한 단계를 수행합니다. 전환을 시작할 때 System Manager에서 작업이 가능한지 여부를 확인하고 그에 따라 워크로드를 정렬합니다.



== MetroCluster 전환 및 스위치백 워크플로우

스위치오버 및 스위치백 워크플로의 전체 프로세스에는 다음 3단계가 포함됩니다.

. * 전환 *: 전환 프로세스를 통해 소스 클러스터 사이트(사이트 B)에서 다른 클러스터 사이트(사이트 A)로 스토리지 및 클라이언트 액세스 제어를 전송할 수 있습니다. 이 운영 작업은 테스트 및 유지보수 중에 무중단 운영을 제공하는 데 도움이 됩니다. 또한 이 프로세스를 통해 사이트 장애로부터 복구할 수 있습니다. 재해 복구 테스트 또는 계획된 사이트 유지 관리의 경우 MetroCluster 전환을 수행하여 DR(재해 복구) 사이트(사이트 A)에 제어를 전송할 수 있습니다. 프로세스를 시작하기 전에 전환을 수행하기 전에 남아 있는 사이트 노드 중 하나 이상이 가동 및 실행 중이어야 합니다. 이전에 DR 사이트의 특정 노드에서 스위치오버 작업이 실패한 경우 이러한 모든 노드에서 작업을 다시 시도할 수 있습니다.
. * 사이트 B 운영 *: 전환이 완료된 후 시스템 관리자가 MetroCluster IP 구성에 대한 복구 프로세스를 완료합니다. 복구는 계획된 이벤트로, 각 단계를 완벽하게 제어하여 다운타임을 최소화합니다. 복구 프로세스는 스위치백 프로세스를 위해 복구된 사이트에서 노드를 준비하기 위해 스토리지 및 컨트롤러 구성요소에 발생하는 2단계 프로세스입니다. 첫 번째 단계에서는 미러링된 Plex를 재동기화하여 애그리게이트를 상속한 다음, 재해 사이트로 다시 전환하여 루트 애그리게이트를 상속합니다.
+
두 번째 단계에서는 사이트에서 스위치백 프로세스를 준비합니다.

. * 스위치백 *: 사이트 B에서 유지 관리 및 수리를 수행한 후 스위치백 작업을 시작하여 사이트 A에서 사이트 B로 스토리지 및 클라이언트 액세스를 제어합니다 스위치백을 성공적으로 수행하려면 다음 조건이 있어야 합니다.
+
** 사이트 A의 노드에서 홈 노드 및 스토리지 셸프의 전원을 켜고 연결할 수 있어야 합니다
** 스위치백 작업을 시작하려면 System Manager에서 복구 단계를 성공적으로 완료해야 합니다.
** 사이트 A의 모든 애그리게이트는 미러링된 상태여야 하며 성능 저하 또는 재동기화 중 상태가 될 수 없습니다.
** 스위치백 작업을 수행하기 전에 이전의 모든 구성 변경을 완료해야 합니다. 이렇게 하면 이러한 변경 사항이 협상된 전환 또는 스위치백 작업과 경쟁하는 것을 방지할 수 있습니다.






== MetroCluster 전환 및 스위치백 워크플로우 순서도

다음 순서도는 스위치오버 및 스위치백 작업을 시작할 때 발생하는 단계와 프로세스를 보여줍니다.

image::../media/switchover_switchback_workflow.jpg[스위치오버 스위치백 워크플로우]
